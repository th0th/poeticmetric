<!doctype html>
<html hx-ext="head-support, loading-states" hx-history="false" lang="en">
  <head>
    <title>{{ if .Title }}{{ .Title }} | PoeticMetric{{ else }}PoeticMetric{{ end }}</title>
    {{ if .Description }}
      <meta content="{{ .Description }}" name="description" />
    {{ end }}


    <link href="/style.css" rel="stylesheet" />
    <script src="/common.js" type="text/javascript"></script>
    <script defer hx-head="re-eval" src="/common-reeval.js" type="text/javascript"></script>
    {{ if .RouteScript }}
      <script defer hx-head="re-eval" src="/routes/{{ .RouteScript }}.js" type="text/javascript"></script>
    {{ end }}


    <link href="/apple-touch-icon.png" rel="apple-touch-icon" sizes="180x180" />
    <link href="/favicon-32x32.png" rel="icon" sizes="32x32" type="image/png" />
    <link href="/favicon-16x16.png" rel="icon" sizes="16x16" type="image/png" />
    <link href="/site.webmanifest" rel="manifest" />
    <link color="#3c91e6" href="/safari-pinned-tab.svg" rel="mask-icon" />
    <meta content="#e2e2e2" name="msapplication-TileColor" />
    <meta content="#3C91E6" name="theme-color" />
    <meta content="width=device-width" name="viewport" />
  </head>

  <body {{ if eq .ColorMode "dark" }}data-bs-theme="dark"{{ end }}>
    <div hx-boost="true" hx-swap="outerHTML transition:true">
      {{ template "partials/header" . }}

      <main>{{ embed }}</main>

      {{ template "partials/footer". }}

      <div id="toasts-store">
        {{ range .Toasts }}
          <div
            class="border-0 toast {{ if eq .Variant "DANGER" }}
              bg-danger text-white
            {{ else if eq .Variant "SUCCESS" }}
              bg-success text-white
            {{ end }}"
            id="toast-{{ .Id }}"
            role="alert"
          >
            <div class="d-flex flex-row">
              <div class="flex-grow-1 toast-body">{{ .Body }}</div>

              <button class="btn-close {{ if .Variant }}btn-close-white{{ end }} m-2" data-bs-dismiss="toast" type="button"></button>
            </div>
          </div>
        {{ end }}
      </div>
    </div>

    <div class="d-flex flex-column gap-3 position-fixed pt-3 start-50 top-0 translate-middle-x" hx-preserve="true" id="toasts"></div>
  </body>
</html>

{{ clearToasts .C }}
