name: reviewdog

on: [pull_request]

jobs:
  eslint:
    name: runner / eslint
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4

    - uses: actions/setup-node@v4
      with:
        node-version: 16

    - name: Install dependencies
      working-directory: ./frontend
      run: npm install --force

    - name: Run ESLint
      working-directory: ./frontend
      run: |
        npx eslint . -f github-actions-report > eslint-report.github

    - name: Reviewdog ESLint
      uses: reviewdog/action-eslint@v1
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        reporter: github-pr-review
        eslint_flags: '-f github-actions-report'
        eslint_report_file: eslint-report.github
